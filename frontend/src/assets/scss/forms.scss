@use "variables" as v;
@use "sass:color";
@use "sass:map";
// ============================================================================
// Inputs â€” SaaS UI (4 sizes)
// Variables used ONLY from your set
// ============================================================================

// --------------------------
// Derived tokens (from yours)
// --------------------------
$input-bg:            #fff;
$input-bg-disabled:   v.$head-bg-color;

$input-text:          v.$text-color;
$input-placeholder:   v.$text-color-light;

$input-border:        v.$border-color;
$input-border-hover:  color.adjust(v.$border-color, $lightness: -6%);
$input-border-focus:  v.$color-primary;
$input-border-error:  #d92d20;

$input-radius:        v.$border-radius;

// --------------------------
// Sizes
// --------------------------
$input-sizes: (
        xs: (h: 28px, px: 8px,  fs: 12px),
        sm: (h: 34px, px: 10px, fs: 13px),
        md: (h: 40px, px: 12px, fs: 14px),
        lg: (h: 48px, px: 16px, fs: 16px)
);

@function _input($size, $key) {
  @return map.get(map.get($input-sizes, $size), $key);
}

@mixin input-size($size) {
  height: map.get(map.get($input-sizes, $size), h);
  padding-inline: map.get(map.get($input-sizes, $size), px);
  font-size: map.get(map.get($input-sizes, $size), fs);
}

// --------------------------
// Base input
// --------------------------
.input {
  display: inline-flex;
  align-items: center;
  width: 100%;

  background: $input-bg;
  border: 1px solid $input-border;
  border-radius: $input-radius;

  color: $input-text;
  font-size: 14px;

  transition:
          border-color 120ms ease,
          box-shadow 120ms ease,
          background-color 120ms ease;

  @include input-size(md);

  &::placeholder {
    color: $input-placeholder;
  }

  &:hover {
    border-color: $input-border-hover;
  }

  &:focus,
  &:focus-visible {
    outline: none;
    border-color: $input-border-focus;
    box-shadow: 0 0 0 3px rgba(v.$color-primary, 0.15);
  }

  &:disabled,
  &.is-disabled {
    background: $input-bg-disabled;
    color: v.$text-color-light;
    cursor: not-allowed;
  }

  &.is-invalid {
    border-color: $input-border-error;

    &:focus {
      box-shadow: 0 0 0 3px rgba($input-border-error, 0.15);
    }
  }
}

// --------------------------
// Sizes
// --------------------------
.input-xs { @include input-size(xs); }
.input-sm { @include input-size(sm); }
.input-md { @include input-size(md); }
.input-lg { @include input-size(lg); }

// --------------------------
// Textarea
// --------------------------
.textarea {
  @extend .input;

  height: auto;
  padding-block: 8px;
  resize: vertical;
  line-height: 1.4;
}

// --------------------------
// Select
// --------------------------
.select {
  @extend .input;

  appearance: none;
  background-image:
          linear-gradient(45deg, transparent 50%, v.$text-color 50%),
          linear-gradient(135deg, v.$text-color 50%, transparent 50%);
  background-position:
          calc(100% - 16px) 50%,
          calc(100% - 11px) 50%;
  background-size: 5px 5px, 5px 5px;
  background-repeat: no-repeat;
  padding-right: 32px;
}

// --------------------------
// Input with icon
// --------------------------
.input-group {
  position: relative;
  width: 100%;

  .input {
    padding-left: 36px;
  }

  .input__icon {
    position: absolute;
    left: 10px;
    top: 50%;
    transform: translateY(-50%);
    color: v.$text-color-light;
    pointer-events: none;
  }
}

// --------------------------
// Helper / error text
// --------------------------
.input-hint {
  margin-top: 4px;
  font-size: 12px;
  color: v.$text-color-light;
}

.input-error {
  margin-top: 4px;
  font-size: 12px;
  color: $input-border-error;
}
